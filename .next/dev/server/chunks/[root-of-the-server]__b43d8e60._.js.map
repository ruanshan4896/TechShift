{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruanshan/Desktop/test%20kiro/tech-news/app/api/articles/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { neon } from '@neondatabase/serverless';\n\nconst sql = neon(process.env.DATABASE_URL!);\n\nexport async function GET() {\n  try {\n    const articles = await sql`\n      SELECT id, title, slug, published_at, view_count, category_id, created_at\n      FROM articles\n      ORDER BY created_at DESC\n    `;\n\n    return NextResponse.json({ articles });\n  } catch (error) {\n    console.error('Error fetching articles:', error);\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { title, slug, content, summary, cover_image_url, category_id } = body;\n\n    const result = await sql`\n      INSERT INTO articles (title, slug, content, summary, cover_image_url, category_id, published_at)\n      VALUES (${title}, ${slug}, ${content}, ${summary}, ${cover_image_url}, ${category_id || null}, NOW())\n      RETURNING id\n    `;\n\n    return NextResponse.json({ success: true, id: result[0].id });\n  } catch (error) {\n    console.error('Error creating article:', error);\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAM,MAAM,IAAA,gKAAI,EAAC,QAAQ,GAAG,CAAC,YAAY;AAElC,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,GAAG,CAAC;;;;IAI3B,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE;QAAS;IACtC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,eAAe,EAAE,WAAW,EAAE,GAAG;QAExE,MAAM,SAAS,MAAM,GAAG,CAAC;;cAEf,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,EAAE,QAAQ,EAAE,EAAE,gBAAgB,EAAE,EAAE,eAAe,KAAK;;IAE/F,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE;QAAC;IAC7D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}